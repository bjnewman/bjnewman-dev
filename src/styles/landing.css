/* =============================================================================
   Photo-Realistic Landing Page

   A desk surface with scattered manila folders, each linking to a section.
   Prioritizes "wow factor" and photo-realism.
============================================================================= */

/* =============================================================================
   Custom Properties
============================================================================= */
:root {
  /* Manila folder colors */
  --folder-base: oklch(82% 0.07 75);
  --folder-light: oklch(86% 0.06 75);
  --folder-dark: oklch(75% 0.08 75);
  --folder-shadow: oklch(35% 0.05 75 / 0.4);

  /* Label colors */
  --label-text: oklch(25% 0.02 75);
  --label-bg: oklch(98% 0.01 90);

  /* Desk overlay */
  --desk-vignette: radial-gradient(
    ellipse at center,
    transparent 40%,
    oklch(15% 0.02 55 / 0.4) 100%
  );
}

/* =============================================================================
   Landing Page Body
============================================================================= */
.landing-page {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  background:
    var(--desk-vignette),
    url('/images/landing/desk-warm.jpg') center/cover no-repeat fixed;
  overflow-x: hidden;
  font-family: 'Inter', system-ui, sans-serif;
}

/* Skip link styling */
.landing-page .skip-link {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--folder-base);
  color: var(--label-text);
  padding: 0.75rem 1.5rem;
  border-radius: 0 0 8px 8px;
  text-decoration: none;
  font-weight: 600;
  z-index: 100;
  transition: top 0.2s ease;
}

.landing-page .skip-link:focus {
  top: 0;
}

/* =============================================================================
   Folder Desk - Container
============================================================================= */
.folder-desk {
  position: relative;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

/* =============================================================================
   Desk Pad - Open Legal Pad with Hero Content
============================================================================= */
.desk-pad {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-1deg);

  /* Legal pad sizing */
  width: clamp(320px, 45vw, 500px);
  aspect-ratio: 8.5 / 11;

  /* Layering - above folders */
  z-index: 5;

  /* Animation */
  animation: pad-drop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s forwards;
  opacity: 0;
}

.desk-pad__page {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 2.5rem 2rem 2rem 3.5rem;

  /* Legal pad yellow paper */
  background:
    /* Horizontal ruled lines */
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent calc(1.75rem - 1px),
      oklch(70% 0.08 200 / 0.25) calc(1.75rem - 1px),
      oklch(70% 0.08 200 / 0.25) 1.75rem
    ),
    /* Paper texture */
    linear-gradient(
      180deg,
      oklch(95% 0.08 95) 0%,
      oklch(93% 0.09 95) 100%
    );

  /* Red margin line */
  border-left: 2px solid oklch(65% 0.2 25 / 0.5);
  margin-left: 1.5rem;

  /* Paper edges */
  border-radius: 0 4px 4px 0;

  /* Depth */
  box-shadow:
    /* Inner highlight */
    inset 0 1px 0 oklch(98% 0.04 95 / 0.5),
    /* Page shadow */
    0 8px 24px oklch(25% 0.05 55 / 0.35),
    0 4px 8px oklch(25% 0.05 55 / 0.2),
    /* Contact shadow */
    0 2px 4px oklch(25% 0.05 55 / 0.15);
}

/* Binding edge - top spiral binding */
.desk-pad__binding {
  position: absolute;
  top: 0;
  left: 0;
  width: 1.5rem;
  height: 100%;

  /* Cardboard backing */
  background:
    linear-gradient(
      90deg,
      oklch(55% 0.06 75) 0%,
      oklch(60% 0.06 75) 50%,
      oklch(50% 0.07 75) 100%
    );

  border-radius: 4px 0 0 4px;

  /* Spiral holes */
  background-image:
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent 1.5rem,
      oklch(30% 0.03 75 / 0.4) 1.5rem,
      oklch(30% 0.03 75 / 0.4) 1.75rem
    );
}

/* Typography on the pad - clean monospace */
.desk-pad__title {
  margin: 0 0 0.75rem 0;
  font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
  font-size: clamp(1.5rem, 3.5vw, 2rem);
  font-weight: 700;
  color: oklch(25% 0.12 250); /* Blue pen */
  line-height: 1.75rem;
}

.desk-pad__subtitle {
  margin: 0 0 1rem 0;
  font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
  font-size: clamp(0.75rem, 1.4vw, 0.9rem);
  font-weight: 400;
  color: oklch(30% 0.1 250);
  line-height: 1.75rem;
}

.desk-pad__tagline {
  margin: 0;
  font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
  font-size: clamp(0.65rem, 1.1vw, 0.8rem);
  font-weight: 400;
  color: oklch(40% 0.08 250);
  line-height: 1.75rem;
}

/* Typewriter code on legal pad - handwritten style */
.desk-pad__code {
  margin-top: 1.5rem;
}

.desk-pad__code .typewriter-container {
  /* No background - just text on the paper */
  background: transparent;
  border-radius: 0;
  padding: 0;
  box-shadow: none;

  /* Clean monospace - like typed notes */
  font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
  font-size: clamp(0.7rem, 1.2vw, 0.85rem);
}

.desk-pad__code .typewriter-code {
  /* Blue ballpoint pen */
  color: oklch(35% 0.15 250);
  line-height: 1.75rem; /* Match ruled lines */
  white-space: pre-wrap;
  word-break: break-word;
}

/* Override syntax highlighting for handwritten look */
.desk-pad__code .code-comment {
  /* Lighter pencil for comments */
  color: oklch(50% 0.05 250);
  font-style: italic;
}

.desk-pad__code .code-keyword {
  /* Slightly bolder pen stroke */
  color: oklch(30% 0.18 250);
  font-weight: 700;
}

.desk-pad__code .code-string {
  /* Green pen for strings */
  color: oklch(40% 0.12 145);
}

.desk-pad__code .code-property {
  color: oklch(35% 0.15 250);
}

.desk-pad__code .code-function {
  /* Purple pen for functions */
  color: oklch(40% 0.15 300);
  font-weight: 600;
}

/* Cursor styled as pen tip */
.desk-pad__code .typewriter-cursor {
  background: oklch(35% 0.15 250);
  width: 2px;
  height: 1.1em;
}

/* Pad entrance animation */
@keyframes pad-drop {
  0% {
    opacity: 0;
    transform: translate(-50%, -60%) rotate(-1deg) scale(0.9);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -48%) rotate(-1deg) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) rotate(-1deg) scale(1);
  }
}

/* =============================================================================
   Folder - The Star of the Show
============================================================================= */
.folder {
  position: absolute;
  left: var(--pos-x, 50%);
  top: var(--pos-y, 50%);
  transform: translate(-50%, -50%) rotate(var(--rotation, 0deg));

  /* Sizing */
  width: clamp(140px, 15vw, 200px);
  aspect-ratio: 1.35 / 1;

  /* Reset link styles */
  text-decoration: none;
  cursor: pointer;

  /* Layering */
  z-index: 1;

  /* Animation */
  transition:
    transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
    z-index 0s 0.35s;
}

/* Folder body - the main rectangle */
.folder__body {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  position: absolute;
  inset: 0;

  /* Folder material */
  background:
    /* Paper texture overlay */
    repeating-linear-gradient(
      90deg,
      transparent 0,
      oklch(50% 0 0 / 0.02) 1px,
      transparent 2px,
      transparent 4px
    ),
    /* Base gradient */
    linear-gradient(
      160deg,
      var(--folder-light) 0%,
      var(--folder-base) 30%,
      var(--folder-dark) 100%
    );

  border-radius: 0 0 6px 6px;

  /* Depth */
  box-shadow:
    /* Inner highlight */
    inset 0 1px 0 oklch(95% 0.03 75 / 0.5),
    /* Soft ambient shadow */
    0 4px 12px var(--folder-shadow),
    /* Hard contact shadow */
    0 2px 4px oklch(25% 0.05 55 / 0.3);
}

/* Folder tab - the top handle */
.folder__tab {
  position: absolute;
  top: -14px;
  left: 15%;
  width: 45%;
  height: 18px;

  /* Tab material */
  background:
    linear-gradient(
      160deg,
      var(--folder-light) 0%,
      var(--folder-base) 60%
    );

  border-radius: 6px 6px 0 0;

  /* Tab label */
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'JetBrains Mono', 'Courier New', monospace;
  font-size: clamp(0.6rem, 1vw, 0.75rem);
  font-weight: 600;
  color: var(--label-text);
  text-transform: uppercase;
  letter-spacing: 0.08em;

  /* Tab shadow */
  box-shadow:
    inset 0 1px 0 oklch(95% 0.03 75 / 0.5),
    0 -1px 3px oklch(25% 0.05 55 / 0.15);
}

/* Hand-drawn doodle on folder body (rough.js SVG) */
.folder__doodle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  /* SVG sizing - responsive (50% larger) */
  width: clamp(3.375rem, 7.5vw, 4.5rem);
  height: clamp(3.375rem, 7.5vw, 4.5rem);

  /* Slight opacity to look like pencil sketch */
  opacity: 0.65;

  /* No interaction */
  pointer-events: none;
}

/* =============================================================================
   Folder Hover State
============================================================================= */
.folder:hover,
.folder--hover,
.folder:focus-visible {
  transform: translate(-50%, -60%) rotate(var(--rotation, 0deg)) scale(1.08);
  z-index: 10;
  transition:
    transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
    z-index 0s;
}

.folder:hover .folder__body,
.folder--hover .folder__body,
.folder:focus-visible .folder__body {
  box-shadow:
    inset 0 1px 0 oklch(95% 0.03 75 / 0.5),
    /* Expanded shadow on lift */
    0 16px 32px var(--folder-shadow),
    0 8px 16px oklch(25% 0.05 55 / 0.25),
    /* Contact shadow stays grounded */
    0 2px 4px oklch(25% 0.05 55 / 0.2);
}

.folder:hover .folder__tab,
.folder--hover .folder__tab,
.folder:focus-visible .folder__tab {
  background:
    linear-gradient(
      160deg,
      oklch(88% 0.05 75) 0%,
      var(--folder-light) 60%
    );
}

/* Focus outline */
.folder:focus-visible {
  outline: none;
}

.folder:focus-visible .folder__body {
  outline: 3px solid oklch(65% 0.2 260);
  outline-offset: 4px;
}

/* =============================================================================
   Mobile Layout - Vertical Scroll
============================================================================= */
@media (max-width: 768px) {
  .folder-desk {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    padding: 2rem 1.5rem 3rem;
    min-height: auto;
  }

  /* Legal pad stacks at top on mobile */
  .desk-pad {
    position: relative;
    top: auto;
    left: auto;
    transform: rotate(-1deg);
    width: min(340px, 90vw);
    aspect-ratio: 8.5 / 9; /* Shorter on mobile */
    order: -1; /* Ensure pad comes first */
    margin-bottom: 1rem;
  }

  .desk-pad__page {
    padding: 1.5rem 1.5rem 1.5rem 2.5rem;
  }

  .desk-pad__binding {
    width: 1rem;
  }

  .desk-pad__title {
    font-size: 1.5rem;
    line-height: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .desk-pad__subtitle {
    font-size: 0.9rem;
    line-height: 1.5rem;
    margin-bottom: 1rem;
  }

  .desk-pad__tagline {
    font-size: 0.7rem;
    line-height: 1.5rem;
  }

  .folder {
    position: relative;
    left: auto;
    top: auto;
    transform: rotate(var(--rotation, 0deg));
    width: min(280px, 85vw);
  }

  .folder:hover,
  .folder--hover,
  .folder:focus-visible {
    transform: rotate(var(--rotation, 0deg)) scale(1.05) translateY(-8px);
  }
}

/* =============================================================================
   Reduced Motion
============================================================================= */
@media (prefers-reduced-motion: reduce) {
  .folder {
    transition: none;
  }

  .folder:hover,
  .folder--hover,
  .folder:focus-visible {
    transform: translate(-50%, -50%) rotate(var(--rotation, 0deg));
  }

  .desk-pad {
    animation: none;
    opacity: 1;
  }

  @media (max-width: 768px) {
    .folder:hover,
    .folder--hover,
    .folder:focus-visible {
      transform: rotate(var(--rotation, 0deg));
    }
  }
}

/* =============================================================================
   High Contrast Mode Support
============================================================================= */
@media (prefers-contrast: more) {
  .folder__body {
    border: 2px solid oklch(25% 0.05 55);
  }

  .folder__tab {
    border: 2px solid oklch(25% 0.05 55);
    border-bottom: none;
  }

  .folder__doodle {
    /* High contrast: make doodle more visible */
    opacity: 1;
  }
}

/* =============================================================================
   Entrance Animations
============================================================================= */
@keyframes folder-drop {
  0% {
    opacity: 0;
    transform: translate(-50%, -80%) rotate(var(--rotation, 0deg)) scale(0.8);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -45%) rotate(var(--rotation, 0deg)) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1);
  }
}

/* Apply animations */
.folder {
  opacity: 0;
  animation: folder-drop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Staggered folder entrance - starts at nth-child(2) because desk-pad is first */
.folder:nth-child(2) { animation-delay: 0.25s; }
.folder:nth-child(3) { animation-delay: 0.35s; }
.folder:nth-child(4) { animation-delay: 0.45s; }
.folder:nth-child(5) { animation-delay: 0.55s; }
.folder:nth-child(6) { animation-delay: 0.65s; }

/* Disable entrance animations for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .desk-pad,
  .folder {
    animation: none;
    opacity: 1;
  }
}

/* Mobile entrance - simpler vertical drop */
@media (max-width: 768px) {
  @keyframes folder-drop-mobile {
    0% {
      opacity: 0;
      transform: rotate(var(--rotation, 0deg)) translateY(-30px);
    }
    100% {
      opacity: 1;
      transform: rotate(var(--rotation, 0deg)) translateY(0);
    }
  }

  .folder {
    animation: folder-drop-mobile 0.4s ease-out forwards;
  }

  .desk-pad {
    animation: none;
    opacity: 1;
  }
}

/* =============================================================================
   View Transitions - Landing Page Elements
   (Folder transitions are in view-transitions.css, shared with Base.astro)
============================================================================= */

/* View transition names for landing page elements */
.desk-pad {
  view-transition-name: desk-pad;
}

.folder-desk {
  view-transition-name: desk-surface;
}

/* Desk pad fades and shrinks when navigating away */
::view-transition-old(desk-pad) {
  animation: desk-pad-out 0.4s ease-out forwards;
}

::view-transition-new(desk-pad) {
  animation: desk-pad-in 0.4s ease-out forwards;
}

@keyframes desk-pad-out {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.9);
  }
}

@keyframes desk-pad-in {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Desk surface - subtle zoom/fade during transition */
::view-transition-old(desk-surface) {
  animation: desk-out 0.5s ease-out forwards;
}

::view-transition-new(desk-surface) {
  animation: desk-in 0.5s ease-out forwards;
}

@keyframes desk-out {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(1.05);
  }
}

@keyframes desk-in {
  0% {
    opacity: 0;
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

