#!/bin/sh
# Fail fast: typecheck first (catches fundamental errors)
echo "Running type checks..."
bun run typecheck || exit 1

# Run oxlint (fast enough to run on whole project)
echo "Running lint checks..."
bun run lint || exit 1

# Run tests
echo "Running tests..."
bun run test || exit 1

# Sync beads if initialized (flushes pending changes to JSONL)
if command -v bd >/dev/null 2>&1 && [ -d ".beads" ]; then
  bd hooks run pre-commit 2>/dev/null || true
fi

echo "âœ“ Pre-commit checks passed"
